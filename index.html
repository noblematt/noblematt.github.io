<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8"/>
    <title>Define question</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">

    <script src="lzma.js"></script>
    <script>
        var lzma = new LZMA("lzma_worker.js");

        document.addEventListener('DOMContentLoaded', function(){
            document.getElementById("go").onclick = function() {
                var i;
                definition = {
                    "question": document.getElementById("question").value,
                    "answers": [],
                    "players": document.getElementById("players").value.split(","),
                    "attempts": [],
                };
                for (i=0; i<10; i++) {
                    definition["answers"].push(document.getElementById(i + 1).value);
                }
                lzma.compress(JSON.stringify(definition), 1, function(compressed, error) {
                    if (error) {
                        alert("Failed to compress data: "+error);
                        return;
                    }
            
                    var reader = new FileReader();
                    reader.onload = function(){
                        var base64 = reader.result.substr(reader.result.indexOf(",")+1);
                        console.log("base64: " + base64);
                        var url = './question.html#' + base64;
                        window.location.assign(url)
                    };
                    reader.readAsDataURL(new Blob([new Uint8Array(compressed)]));
                });
            };
        });
    </script>
</head>
<body>
    <div class="container">
        <div class="col-md-12"><form class="form-horizontal">
            <div class="form-group">
                <label for="question" class="col-md-2 control-label">Question</label>
                <div class="col-md-10"><input type="text" id="question" class="form-control"></div>
            </div>
            <div class="form-group">
                <label for="1" class="col-md-2 control-label">1</label>
                <div class="col-md-9"><input type="text" id="1" class="form-control"></div>
            </div>
            <div class="form-group">
                <label for="2" class="col-md-2 control-label">2</label>
                <div class="col-md-9"><input type="text" id="2" class="form-control"></div>
            </div>
            <div class="form-group">
                <label for="3" class="col-md-2 control-label">3</label>
                <div class="col-md-9"><input type="text" id="3" class="form-control"></div>
            </div>
            <div class="form-group">
                <label for="4" class="col-md-2 control-label">4</label>
                <div class="col-md-9"><input type="text" id="4" class="form-control"></div>
            </div>
            <div class="form-group">
                <label for="5" class="col-md-2 control-label">5</label>
                <div class="col-md-9"><input type="text" id="5" class="form-control"></div>
            </div>
            <div class="form-group">
                <label for="6" class="col-md-2 control-label">6</label>
                <div class="col-md-9"><input type="text" id="6" class="form-control"></div>
            </div>
            <div class="form-group">
                <label for="7" class="col-md-2 control-label">7</label>
                <div class="col-md-9"><input type="text" id="7" class="form-control"></div>
            </div>
            <div class="form-group">
                <label for="8" class="col-md-2 control-label">8</label>
                <div class="col-md-9"><input type="text" id="8" class="form-control"></div>
            </div>
            <div class="form-group">
                <label for="9" class="col-md-2 control-label">9</label>
                <div class="col-md-9"><input type="text" id="9" class="form-control"></div>
            </div>
            <div class="form-group">
                <label for="10" class="col-md-2 control-label">10</label>
                <div class="col-md-9"><input type="text" id="10" class="form-control"></div>
            </div>
            <div class="form-group">
                <label for="players" class="col-md-2 control-label">Players</label>
                <div class="col-md-10"><input type="text" id="players" class="form-control" placeholder="Comma-separated list of players"><br>
            </div>
            <div class="form-group">
                <div class="col-md-offset-1 col-md-10">
                     <input type="submit" id="go" value="Go" class="btn btn-default">
                </div>
            </div>
        </form></div>
    </div>
</body>
</html>
